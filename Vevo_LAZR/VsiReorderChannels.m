% VsiReorderChannels.m
% Copyright VisualSonics 1999-2010
% A. Needles
% Revision 1.0: Dec. 7, 2010.
% A function to reorder unbeamformed IQ data on the Vevo 2100 from system
% channels to transducer elements

function [IdataPlanar, QdataPlanar] = ReorderChannels(Idata, Qdata, ApertureStart, ApertureEnd, samples, lines)

elements = [1
			33
			5
			37
			9
			41
			13
			45
			17
			49
			21
			53
			25
			57
			29
			61
			3
			35
			7
			39
			11
			43
			15
			47
			19
			51
			23
			55
			27
			59
			31
			63
			2
			34
			6
			38
			10
			42
			14
			46
			18
			50
			22
			54
			26
			58
			30
			62
			0
			32
			4
			36
			8
			40
			12
			44
			16
			48
			20
			52
			24
			56
			28
			60
			65
			97
			69
			101
			73
			105
			77
			109
			81
			113
			85
			117
			89
			121
			93
			125
			67
			99
			71
			103
			75
			107
			79
			111
			83
			115
			87
			119
			91
			123
			95
			127
			66
			98
			70
			102
			74
			106
			78
			110
			82
			114
			86
			118
			90
			122
			94
			126
			64
			96
			68
			100
			72
			104
			76
			108
			80
			112
			84
			116
			88
			120
			92
			124
			129
			161
			133
			165
			137
			169
			141
			173
			145
			177
			149
			181
			153
			185
			157
			189
			131
			163
			135
			167
			139
			171
			143
			175
			147
			179
			151
			183
			155
			187
			159
			191
			130
			162
			134
			166
			138
			170
			142
			174
			146
			178
			150
			182
			154
			186
			158
			190
			128
			160
			132
			164
			136
			168
			140
			172
			144
			176
			148
			180
			152
			184
			156
			188
			193
			225
			197
			229
			201
			233
			205
			237
			209
			241
			213
			245
			217
			249
			221
			253
			195
			227
			199
			231
			203
			235
			207
			239
			211
			243
			215
			247
			219
			251
			223
			255
			194
			226
			198
			230
			202
			234
			206
			238
			210
			242
			214
			246
			218
			250
			222
			254
			192
			224
			196
			228
			200
			232
			204
			236
			208
			240
			212
			244
			216
			248
			220
			252];
        
QdataPlanar = zeros(samples, lines);
IdataPlanar = zeros(samples, lines);

ApertureSize = ApertureEnd - ApertureStart +1;

for i=ApertureStart:ApertureEnd
    QdataPlanar(:,elements(i+1)-ApertureStart+1) = Qdata(:,i-ApertureStart+1);
    IdataPlanar(:,elements(i+1)-ApertureStart+1) = Idata(:,i-ApertureStart+1);
end
    